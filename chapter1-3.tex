\section{Special monoids and the free group}

We have just learned about the syntactic monoid as an example for a monoid. For
the theory of syntactic monoids see \cite{Salomaa} and \cite{Perrot}.

Let's have a look at other special monoids which we will need again later. To do
so, we introduce the notion of a {\bf generated congruence relation}.

Let $A$ be an alphabet and
\[ R = \setof{u_i = v_i \mid i = 1, \ldots, n,\ u_i, v_i \in A^*} \] 
a set of equations.

Then by the following conditions a congruence relation $\bar{R}$ is uniquely
determined (exercise):
\begin{enumerate}
  \item $\setof{(u_i, v_i) \mid u_i = v_i \in R} \subset \bar{R}$
  \item $\bar{R}$\ is a congruence relation
  \item $\bar{R} \subset R'$\ for all $R'$\ fulfilling (1) and (2).
\end{enumerate}

$\bar{R}$ is the smallest congruence relation in which all
the equations from $R$ hold and is called the congruence relation 
{\bf generated by} $R$ on $A^*$.

The factor monoid $A^*/\bar{R}$ will also simply be named $A^*/R$. It holds:

Two words $u, v \in A^*$ are congruent modulo $\bar{R}$ (notation: $u
\equiv v (\bar{R})$) iff there exists $n \in \mathbb{N},\ u_i \in A^*$ with $u_i
= u_i' \cdot u_i \cdot u_i''$ such that for $i = 1, \ldots, n$:
\begin{enumerate}
  \item $u = u_1,\ v = u_n$
  \item $u_i' = u_{i+1}',\ u_{i}'' = u_{i+1}'',\ (u_{i} = u_{i+1}) \in R$ 
  for $i = 1, \ldots, n-1$.
\end{enumerate}

We say: $v$ is constructed from $u$ by {\bf applying the equations} from $R$.

The congruence classes of $u \in A^*$ in the factor monoid $A^*/R$ are denoted
by $[u]_{A^*/R}$ or simply $[u]$.

\begin{definition}
Let $X$ be an alphabet. Define $X^{-1} := \setof{x^{-1} \mid x \in X}$ as the
set of formal inverses.
\end{definition}

We can think of $x$ and $x^{-1}$ as corresponding pairs of
brackets as we did in the definition of the Dyck languages in the introduction.

We will now introduce a partition of $(X \cup X^{-1})^*$ wrt.\ to
different congruence relations and look into the corresponding factor monoids.

\begin{definition}
\[ \hgroup{X} := (\unioninv{X})^*\ /\ \setof{x x^{-1} = 1 \mid x \in X} \] is
called the {\bf H-group}\footnote{In the literature this monoid (which is not a
group!) is also called {\em free half-group} or {\em involutive monoid}.}.
\end{definition}

We introduce a special absorbing element $0$ by defining:
\begin{definition}
\begin{eqnarray*}
\pocymon{X} & := & (\unioninv{X} \cup \setof{0})^*\ /\ \\
& & \setof{x x^{-1} = 1,\,x y^{-1} = 0,\,0 z = z 0 = 0 \mid x,y \in X,\ x\neq
y,\ z \in \unioninv{X} \cup \setof{0}}
\end{eqnarray*}
is called the {\bf polycyclic monoid}.
\end{definition}

Using the naming of the previous section we get:
\[ \pocymon{X} = synt_{X^*}(D(X)) \]
which means:

The polycyclic monoid is the syntactic monoid of the Dyck language (exercise).

\begin{definition}
\[ F(X) := (\unioninv{X})^*\ /\ \setof{x \cdot x^{-1} = x^{-1} \cdot x = 1 \mid
x \in X} \]
\end{definition}
is the {\bf free group} over $X$.

\label{dyck-language}
Remark: It holds $D(X) = [1]_{\pocymon{X}}$ and $D(X) = [1]_{\hgroup{X}}$ which
means the Dyck language is the set of words from $(\unioninv{X})^*$ which can be
reduced to the empty word either using the equations of the H-group or the
equations of the polycyclic monoid.

In the following we will mainly consider \hgroup{X}, the H-group over $X$.

For $w \in (\unioninv{X})^*$ we define the reduced word $|w|$ as follows: 

If $w$ does not contain a subword of the form $x x^{-1}$ then $|w| := w$.
Otherwise, iteratively replace the leftmost occurence of the subword $x
x^{-1}$ by 1.

This process is called {\bf reduction} and the result is denoted by $\rho(w)$.

One can easily prove:

\begin{lemma}
There exists a minimal number $k \in \mathbb{N}$ with $\rho^k(w) = |w|$. This
number is called the {\bf reduction length}. It holds $\rho(|w|) = |w|$.
\end{lemma}

\bigskip
\begin{lemma}
For $[w], [w'] \in \hgroup{X}$ holds:
\[ [w] = [w'] \iff |w| = |w'| \]
\end{lemma}

\begin{proof}
''$\Leftarrow$'': It holds $w \equiv |w| = |w'| \equiv w' \Rightarrow [w] =
[w']$.

''$\Rightarrow''$: Let $[w] = [w']$. We may assume that $w'$ is created from $w$
by application of an equation $x x^{-1} = 1$. Let $w = w_1 x x^{-1} w_2$ and $w' = w_1 w_2$.

We show: If $k$ is the reduction length of $w_1$, then $\rho^{k+1}(w) =
\rho^k(w')$\ (thus the reduced words are equal).

Proof by induction over $k$:
\begin{itemize}
  \item  $k = 0$: $w_1$ is already reduced, so $\rho(w) = w_1 w_2 = w'$.
  \item $k > 0$: It holds $\rho(w) = \rho(w_1 x x^{-1} w_2),\ \rho(w') = \rho(w_1
w_2)$. The reduction length of $\rho(w)$ by induction assumption is $k-1$ and
$\rho^k \rho(w) = \rho^{k-1}\rho(w') \Rightarrow$ the reduced word of $w$ and
$w'$ is the same so $|w| = |w'|$.
\end{itemize}
\end{proof}

Remark: Using the same argument one can show that the creation of the reduced
word does not depend on the order of the reductions. Therefore the reduced word
for a representative of an element of $\hgroup{X}$ is unique, so we can speak of {\em the} 
reduced word in the following.

Remark: These results have been used in \cite{HotzMesserschmidt} to obtain a
space-optimal algorithm for the analysis of the Dyck language.

Similar results also hold for the free group $F(X)$, see \cite{CrowellFox}.
