\section{Special monoids and the free group}

We have just learned about the syntactic monoid as an example for a monoid. For
the theory of syntactic monoids see \cite{Salomaa} and \cite{Perrot}.

Let's have a look at more special monoids which we will need again later. To do
so, we introduce the notion of {\bf generated congruence relation}.

Let $A$ be an alphabet and
\[ R = \{ u_i = v_i \mid i = 1, \ldots, n,\ u_i, v_i \in A^* \} \] 
a set of equations.

Then by the following conditions a congruence relation $\bar{R}$ is uniquely
determined (exercise:
\begin{enumerate}
  \item $\{ (u_i, v_i) \mid u_i = v_i \in R \} \subset \bar{R}$
  \item $\bar{R}$\ is a congruence relation
  \item $\bar{R} \subset R'$\ for all $R'$\ fulfilling (1) and (2).
\end{enumerate}

$\bar{R}$ is called the {\bf congruence relation generated by} $R$ on $A^*$.

The factor monoid $A^*/\bar{R}$ is named just $A^*/R$ for simplicity.

It holds: 

Two words $u, v \in A^*$ are congruent wrt.\ $\bar{R}$ (Notation: $u
\equiv v (\bar{R})$) iff there exists $n \in \mathbb{N},\ u_i \in A^*$ with $u_i
= u_{i,1} \cdot u_{i,2} \cdot u_{i,3}$ such that for $i = 1, \ldots, n$:
\begin{enumerate}
  \item $u = u_1,\ v = u_n$
  \item $u_{i,1} = u_{i+1,1},\ u_{i,3} = u_{i+1,3},\ (u_{i,2} = u_{i+1,2}) \in
  R$ for $i = 1, \ldots, n-1$.
\end{enumerate}

We say: $v$ is constructed from $u$ by applying the equations from $R$.

The congruence classes of $u \in A^*$ in $A^* / R$ are denoted by $[u]_{A^*/R}$
or just $[u]$.

\begin{definition}
Let $X$ be an alphabet. Define $X^{-1} := \{ x^{-1}\ |\ x \in X \}$ as the set
of formal inverses.
\end{definition}

We can think of $x$ and $x^{-1}$ as corresponding pairs of
brackets as we did in the definition of the Dyck languages in the introduction.

We will now introduce a partition of $(X \cup X^{-1})^*$ wrt.\ to
different congruence relations and llok at the corresponding factor monoids.

\begin{definition}
\[ \hgroup{X} := (\unioninv{X})^*\ /\ \{ x x^{-1} = 1 \mid x \in X \} \] is
called the {\bf H-group}.
\end{definition}

Now we introduce a special absorbing element $0$ by defining:
\begin{definition}
\begin{eqnarray*}
\pocymon{X} & := & (\unioninv{X} \cup \{ 0 \})^*\ /\ \\
& & \{ x x^{-1} = 1,\ x y^{-1} = 0,\ 0
z = z 0 = 0 \mid x,y \in X,\ x\neq y,\ z \in \unioninv{X} \cup \{0\} \}
\end{eqnarray*}
is called the {\bf polycyclic monoid}.
\end{definition}

Using the naming of the previous section we get:
\[ X^{(*)} = synt_{X^*}(D(X)) \]
which means: the polycyclic monoid is the syntactic monoid of the Dyck language.

(Exercise)

\begin{definition}
\[ F(X) := (\unioninv{X})^*\ /\ \{ x x^{-1} = x^{-1} x = 1 \mid x \in X \} \]
\end{definition}
is the {\bf free group} over $X$.

Remark: It holds $D(X) = [1]_{\pocymon{X}}$ and $D(X) = [1]_{\hgroup{X}}$ which
means the Dyck language is the set of words from $(\unioninv{X})^*$ which can be
reduced to the empty word using the equations of the corresponding monoid.

In the following we will mainly consider \hgroup{X}, the H-group over $X$.

For $w \in (\unioninv{X})^*$ we define the reduced word $|w|$ as follows: 

If $w$ does not contain a subword of the form $x x^{-1}$ then $|w| = w$.
Otherwise, iteratively replace the leftmost occurence of $x x^{-1}$ by 1.

This process is called {\bf reduction} and the result is denoted by $\rho(w)$.
One can easily prove:

\begin{lemma}
There exists a minimal number $k \in \mathbb{N}$ with $\rho^k(w) = |w|$. The
number $k$ is called the {\bf reduction length}. It holds $\rho(|w|) = |w|$.
\end{lemma}

\bigskip

\begin{lemma}
$ [w] = [w'] \in \hgroup{X} \Leftrightarrow |w| = |w'|.$
\end{lemma}

\begin{proof}
''$\Leftarrow$'': It holds $w \equiv |w| = |w'| \equiv w' \Rightarrow [w] =
[w']$.

''$\Rightarrow''$: Let $[w] = [w']$. We may assume that $w'$ is created from $w$
by application of an equation $x x^{-1} = 1$. Let $w = w_1 x x^{-1} w_2$ and $w' = w_1 w_2$.

We show: If $k$ is the reduction length of $w_1$, then $\rho^{k+1}(w) =
\rho^k(w')$\ (thus the reduced words are equal).

Proof by induction over $k$:
\begin{itemize}
  \item  $k = 0$: $w_1$ is already reduced, so $\rho(w) = w_1 w_2 = w'$.
  \item $k > 0$: It holds $\rho(w) = \rho(w_1 x x^{-1} w_2), \quad \rho(w') = \rho(w_1
w_2)$. The reduction length of $\rho(w)$ by induction proposition is $k-1$ and
$\rho^k \rho(w) = \rho^{k-1}\rho(w') \Rightarrow$ the reduced word of $w$ and
$w'$ is the same so $|w| = |w'|$.
\end{itemize}
\end{proof}

Remark: Using the same argument one can show that the creation of the reduced
word does not depend on the order of the reductions.

Therefore the reduced word for a representative of an element of $\hgroup{X}$ is
unique, so we can just speak of ''the'' reduced word in the following.

Remark: These results have been used in \cite{HotzMesserschmidt} to obtain a
space-optimal algorithm for the analysis of the Dyck language.

Similar results also hold for the free group $F(X)$, see \cite{CrowellFox}.

